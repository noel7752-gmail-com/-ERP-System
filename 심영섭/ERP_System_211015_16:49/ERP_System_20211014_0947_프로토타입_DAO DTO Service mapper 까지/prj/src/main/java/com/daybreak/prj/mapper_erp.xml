<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm -->
<!-- mapper 태그 선언 -->
<!-- mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm -->
<mapper namespace="com.daybreak.prj.ERPDAO">

<select id="getSearcALLhList" parameterType="com.daybreak.prj.ERPSearchDTO"  resultType="java.util.HashMap">


	select * from (select rownum RNUM,B.* from (
	    select
	        BIGI.pic "pic"
	        ,BIGI.G_ITEM_CODE "g_item_code"
	         ,BIGI.G_ITEM_NAME "g_item_name"
	        ,B.BRAND_NAME "brand_name"
	        ,BIGC.G_SUB_CATEGORY_NAME "g_category_name"
	        ,BIGI.POWER_CONSUM "power_consum"
	        ,(
	        select
	        	 nvl(SUM(STOCK_IN_CNT),0)
	        from
	       		BO_ID_G_ITEMS BIGI inner join BO_ID_INPUT_DATE IPD on BIGI.G_ITEM_CODE=IPD.G_ITEM_CODE
	        )-
	        (
	        select
	        	 nvl(SUM(STOCK_OUT_CNT),0)
	        from
	       		BO_ID_G_ITEMS BIGI inner join BO_ID_OUTPUT_DATE OPD on BIGI.G_ITEM_CODE=OPD.G_ITEM_CODE
	        ) "stock"
	    from (BO_ID_G_ITEMS BIGI inner join BO_ID_G_SUB_CATEGORY BIGC
	    on  BIGI.G_SUB_CATEGORY_CODE =  BIGC.G_SUB_CATEGORY_CODE ) inner join BRAND B on B.BRAND_CODE=BIGI.BRAND_CODE
    ) B <![CDATA[where rownum<=${selectPageNo*rowCntPerPage}) where RNUM>=${selectPageNo*rowCntPerPage-rowCntPerPage+1}]]>	
    
    
    
</select>

<select id="getSearchAllCnt" parameterType="com.daybreak.prj.ERPSearchDTO"  resultType="int">


	    select
	        count(*)
	    from (BO_ID_G_ITEMS BIGI inner join BO_ID_G_SUB_CATEGORY BIGC
	    on  BIGI.G_SUB_CATEGORY_CODE =  BIGC.G_SUB_CATEGORY_CODE ) inner join BRAND B on B.BRAND_CODE=BIGI.BRAND_CODE
    
    
    
</select>



</mapper>